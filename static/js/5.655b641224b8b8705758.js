webpackJsonp([5],{NPMN:function(t,e){},pTvX:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("YtJ0"),n={name:"qsFill",data:function(){return{qsItem:[],qsList:s.a.get(),isError:!1,showDialog:!1,info:"",submitError:!1,requiredItem:{}}},created:function(){console.log(this.$route.query.num),this.fetchData()},mounted:function(){this.getRequiredItem()},methods:{go_home:function(){this.$router.push({path:"/home"})},fetchData:function(){for(var t=0,e=this.qsList.length;t<e;t++)if(this.qsList[t].num==this.$route.query.num){this.qsItem=this.qsList[t];break}t===this.qsList.length&&(this.isError=!0)},getMsg:function(t){var e="";return e="radio"===t.type?"(单选题)":"checkbox"===t.type?"(多选题)":"(文本题)",t.isNeed?e+" *":e},submit:function(){var t=this;"inissue"===this.qsItem.state?this.validate()?(this.showDialog=!0,this.submitError=!1,this.info="提交成功！",setTimeout(function(){t.showDialog=!1},500),setTimeout(function(){t.$router.push({path:"/"})},1500)):(this.showDialog=!0,this.submitError=!0,this.info="提交失败！ 存在必填项未填"):(this.showDialog=!0,this.submitError=!0,this.info="提交失败！ 只有发布中的问卷才能提交")},getRequiredItem:function(){var t=this;this.qsItem.question.forEach(function(e){e.isNeed&&e.isNeed&&("checkbox"===e.type?t.requiredItem[e.num]=[]:t.requiredItem[e.num]="")})},validate:function(){for(var t in this.requiredItem)if(0===this.requiredItem[t].length)return!1;return!0}},watch:{$route:"fetchData"}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fill-container",attrs:{id:"qsFill"}},[t.isError?i("div",{staticClass:"error"},[t._v("404 Not Found")]):i("div",{staticClass:"fill"},[i("h2",[i("span",{staticClass:"el-icon-arrow-left back",on:{click:t.go_home}}),t._v("\n      "+t._s(t.qsItem.title)+"\n    ")]),t._v(" "),i("div",{staticClass:"content"},t._l(t.qsItem.question,function(e){return i("div",{staticClass:"content-item"},[i("p",{staticClass:"qs-title"},[t._v(t._s(e.num)+". "+t._s(e.title)+" "+t._s(t.getMsg(e)))]),t._v(" "),t._l(e.options,function(s){return i("p",{staticClass:"option"},[i("label",["radio"===e.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.requiredItem[e.num],expression:"requiredItem[item.num]"}],attrs:{type:"radio",name:e.num+"-"+e.title},domProps:{value:s,checked:t._q(t.requiredItem[e.num],s)},on:{change:function(i){t.$set(t.requiredItem,e.num,s)}}}):t._e(),t._v(" "),"checkbox"===e.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.requiredItem[e.num],expression:"requiredItem[item.num]"}],attrs:{type:"checkbox",name:e.num+"-"+e.title},domProps:{value:s,checked:Array.isArray(t.requiredItem[e.num])?t._i(t.requiredItem[e.num],s)>-1:t.requiredItem[e.num]},on:{change:function(i){var n=t.requiredItem[e.num],r=i.target,o=!!r.checked;if(Array.isArray(n)){var a=s,u=t._i(n,a);r.checked?u<0&&t.$set(t.requiredItem,e.num,n.concat([a])):u>-1&&t.$set(t.requiredItem,e.num,n.slice(0,u).concat(n.slice(u+1)))}else t.$set(t.requiredItem,e.num,o)}}}):t._e(),t._v("\n            "+t._s(s)+"\n          ")])])}),t._v(" "),"textarea"===e.type?i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.requiredItem[e.num],expression:"requiredItem[item.num]"}],domProps:{value:t.requiredItem[e.num]},on:{input:function(i){i.target.composing||t.$set(t.requiredItem,e.num,i.target.value)}}}):t._e()],2)}),0),t._v(" "),i("transition",{attrs:{name:"fade"}},[t.showDialog?i("div",{staticClass:"dialog"},[t.submitError?i("div",{staticClass:"submit-dialog"},[i("header",[i("span",[t._v("提示")]),t._v(" "),i("span",{staticClass:"close-btn",on:{click:function(e){t.showDialog=!1}}},[t._v("X")])]),t._v(" "),i("p",[t._v(t._s(t.info))]),t._v(" "),i("div",{staticClass:"btn-box"},[i("button",{staticClass:"yes",on:{click:function(e){t.showDialog=!1}}},[t._v("确定")]),t._v(" "),i("button",{on:{click:function(e){t.showDialog=!1}}},[t._v("取消")])])]):i("div",{staticClass:"submit-dialog"},[i("header",[i("span",[t._v("提示")]),t._v(" "),i("span",{staticClass:"close-btn",on:{click:function(e){t.showDialog=!1}}},[t._v("X")])]),t._v(" "),i("p",[t._v(t._s(t.info))])])]):t._e()]),t._v(" "),i("footer",[i("button",{staticClass:"submit",on:{click:t.submit}},[t._v("提交")])])],1)])},staticRenderFns:[]};var o=i("VU/8")(n,r,!1,function(t){i("NPMN")},"data-v-0b9ad3e2",null);e.default=o.exports}});
//# sourceMappingURL=5.655b641224b8b8705758.js.map