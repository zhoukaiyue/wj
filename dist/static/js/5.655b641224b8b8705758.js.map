{"version":3,"sources":["webpack:///src/pages/Preview/preview.vue","webpack:///./src/pages/Preview/preview.vue?fbf8","webpack:///./src/pages/Preview/preview.vue"],"names":["preview","name","data","qsItem","qsList","store","get","isError","showDialog","info","submitError","requiredItem","created","console","log","this","$route","query","num","fetchData","mounted","getRequiredItem","methods","go_home","$router","push","path","i","length","getMsg","item","msg","type","isNeed","submit","_this","state","validate","setTimeout","_this2","question","forEach","watch","Preview_preview","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","id","_v","on","click","_s","title","_l","option","directives","rawName","value","expression","domProps","checked","_q","change","$event","$set","_e","Array","isArray","_i","$$a","$$el","target","$$c","$$v","$$i","concat","slice","input","composing","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.655b641224b8b8705758.js","sourcesContent":["<template>\r\n  <div id=\"qsFill\" class=\"fill-container\">\r\n    <div class=\"fill\" v-if=\"!isError\">\r\n      <h2>\r\n        <span class=\"el-icon-arrow-left back\" @click=\"go_home\"></span>\r\n        {{qsItem.title}}\r\n      </h2>\r\n      <div class=\"content\">\r\n        <div class=\"content-item\" v-for=\"item in qsItem.question\">\r\n          <p class=\"qs-title\">{{item.num}}.&nbsp;{{item.title}}&nbsp;{{getMsg(item)}}</p>\r\n          <p v-for=\"option in item.options\" class=\"option\">\r\n            <label>\r\n              <input\r\n                type=\"radio\"\r\n                :name=\"`${item.num}-${item.title}`\"\r\n                v-model=\"requiredItem[item.num]\"\r\n                v-if=\"item.type === 'radio'\"\r\n                :value=\"option\"\r\n              >\r\n              <input\r\n                type=\"checkbox\"\r\n                :name=\"`${item.num}-${item.title}`\"\r\n                v-model=\"requiredItem[item.num]\"\r\n                v-if=\"item.type === 'checkbox'\"\r\n                :value=\"option\"\r\n              >\r\n              {{option}}\r\n            </label>\r\n          </p>\r\n          <textarea v-if=\"item.type === 'textarea'\" v-model=\"requiredItem[item.num]\"></textarea>\r\n        </div>\r\n      </div>\r\n      <transition name=\"fade\">\r\n        <div class=\"dialog\" v-if=\"showDialog\">\r\n          <div class=\"submit-dialog\" v-if=\"submitError\">\r\n            <header>\r\n              <span>提示</span>\r\n              <span class=\"close-btn\" @click=\"showDialog = false\">X</span>\r\n            </header>\r\n            <p>{{info}}</p>\r\n            <div class=\"btn-box\">\r\n              <button class=\"yes\" @click=\"showDialog = false\">确定</button>\r\n              <button @click=\"showDialog = false\">取消</button>\r\n            </div>\r\n          </div>\r\n          <div class=\"submit-dialog\" v-else>\r\n            <header>\r\n              <span>提示</span>\r\n              <span class=\"close-btn\" @click=\"showDialog = false\">X</span>\r\n            </header>\r\n            <p>{{info}}</p>\r\n          </div>\r\n        </div>\r\n      </transition>\r\n      <footer>\r\n        <button @click=\"submit\" class=\"submit\">提交</button>\r\n      </footer>\r\n    </div>\r\n    <div class=\"error\" v-else>404 Not Found</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport storage from \"@/vuex/store.js\";\r\nexport default {\r\n  name: \"qsFill\",\r\n  data() {\r\n    return {\r\n      qsItem: [],\r\n      qsList: storage.get(),\r\n      isError: false,\r\n      showDialog: false,\r\n      info: \"\",\r\n      submitError: false,\r\n      requiredItem: {}\r\n    };\r\n  },\r\n  created() {\r\n    console.log(this.$route.query.num);\r\n    this.fetchData();\r\n  },\r\n  mounted() {\r\n    this.getRequiredItem();\r\n  },\r\n  methods: {\r\n    go_home() {\r\n      this.$router.push({ path: \"/home\" });\r\n    },\r\n    fetchData() {\r\n      let i = 0;\r\n      for (let length = this.qsList.length; i < length; i++) {\r\n        if (this.qsList[i].num == this.$route.query.num) {\r\n          this.qsItem = this.qsList[i];\r\n          break;\r\n        }\r\n      }\r\n      if (i === this.qsList.length) this.isError = true;\r\n    },\r\n    getMsg(item) {\r\n      let msg = \"\";\r\n      if (item.type === \"radio\") {\r\n        msg = \"(单选题)\";\r\n      } else if (item.type === \"checkbox\") {\r\n        msg = \"(多选题)\";\r\n      } else {\r\n        msg = \"(文本题)\";\r\n      }\r\n      return item.isNeed ? `${msg} *` : msg;\r\n    },\r\n    submit() {\r\n      if (this.qsItem.state === \"inissue\") {\r\n        let result = this.validate();\r\n        if (result) {\r\n          this.showDialog = true;\r\n          this.submitError = false;\r\n          this.info = \"提交成功！\";\r\n          setTimeout(() => {\r\n            this.showDialog = false;\r\n          }, 500);\r\n          setTimeout(() => {\r\n            this.$router.push({ path: \"/\" });\r\n          }, 1500);\r\n        } else {\r\n          this.showDialog = true;\r\n          this.submitError = true;\r\n          this.info = \"提交失败！ 存在必填项未填\";\r\n        }\r\n      } else {\r\n        this.showDialog = true;\r\n        this.submitError = true;\r\n        this.info = \"提交失败！ 只有发布中的问卷才能提交\";\r\n      }\r\n    },\r\n    getRequiredItem() {\r\n      this.qsItem.question.forEach(item => {\r\n        if (item.isNeed) {\r\n          if (item.isNeed) {\r\n            if (item.type === \"checkbox\") {\r\n              this.requiredItem[item.num] = [];\r\n            } else {\r\n              this.requiredItem[item.num] = \"\";\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n    validate() {\r\n      for (let i in this.requiredItem) {\r\n        if (this.requiredItem[i].length === 0) return false;\r\n      }\r\n      return true;\r\n    }\r\n  },\r\n  watch: {\r\n    $route: \"fetchData\"\r\n  }\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n@import \"./index.scss\";\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/Preview/preview.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fill-container\",attrs:{\"id\":\"qsFill\"}},[(!_vm.isError)?_c('div',{staticClass:\"fill\"},[_c('h2',[_c('span',{staticClass:\"el-icon-arrow-left back\",on:{\"click\":_vm.go_home}}),_vm._v(\"\\n      \"+_vm._s(_vm.qsItem.title)+\"\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"content\"},_vm._l((_vm.qsItem.question),function(item){return _c('div',{staticClass:\"content-item\"},[_c('p',{staticClass:\"qs-title\"},[_vm._v(_vm._s(item.num)+\". \"+_vm._s(item.title)+\" \"+_vm._s(_vm.getMsg(item)))]),_vm._v(\" \"),_vm._l((item.options),function(option){return _c('p',{staticClass:\"option\"},[_c('label',[(item.type === 'radio')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.requiredItem[item.num]),expression:\"requiredItem[item.num]\"}],attrs:{\"type\":\"radio\",\"name\":((item.num) + \"-\" + (item.title))},domProps:{\"value\":option,\"checked\":_vm._q(_vm.requiredItem[item.num],option)},on:{\"change\":function($event){_vm.$set(_vm.requiredItem, item.num, option)}}}):_vm._e(),_vm._v(\" \"),(item.type === 'checkbox')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.requiredItem[item.num]),expression:\"requiredItem[item.num]\"}],attrs:{\"type\":\"checkbox\",\"name\":((item.num) + \"-\" + (item.title))},domProps:{\"value\":option,\"checked\":Array.isArray(_vm.requiredItem[item.num])?_vm._i(_vm.requiredItem[item.num],option)>-1:(_vm.requiredItem[item.num])},on:{\"change\":function($event){var $$a=_vm.requiredItem[item.num],$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=option,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.requiredItem, item.num, $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.requiredItem, item.num, $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.requiredItem, item.num, $$c)}}}}):_vm._e(),_vm._v(\"\\n            \"+_vm._s(option)+\"\\n          \")])])}),_vm._v(\" \"),(item.type === 'textarea')?_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.requiredItem[item.num]),expression:\"requiredItem[item.num]\"}],domProps:{\"value\":(_vm.requiredItem[item.num])},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.requiredItem, item.num, $event.target.value)}}}):_vm._e()],2)}),0),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.showDialog)?_c('div',{staticClass:\"dialog\"},[(_vm.submitError)?_c('div',{staticClass:\"submit-dialog\"},[_c('header',[_c('span',[_vm._v(\"提示\")]),_vm._v(\" \"),_c('span',{staticClass:\"close-btn\",on:{\"click\":function($event){_vm.showDialog = false}}},[_vm._v(\"X\")])]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.info))]),_vm._v(\" \"),_c('div',{staticClass:\"btn-box\"},[_c('button',{staticClass:\"yes\",on:{\"click\":function($event){_vm.showDialog = false}}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){_vm.showDialog = false}}},[_vm._v(\"取消\")])])]):_c('div',{staticClass:\"submit-dialog\"},[_c('header',[_c('span',[_vm._v(\"提示\")]),_vm._v(\" \"),_c('span',{staticClass:\"close-btn\",on:{\"click\":function($event){_vm.showDialog = false}}},[_vm._v(\"X\")])]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.info))])])]):_vm._e()]),_vm._v(\" \"),_c('footer',[_c('button',{staticClass:\"submit\",on:{\"click\":_vm.submit}},[_vm._v(\"提交\")])])],1):_c('div',{staticClass:\"error\"},[_vm._v(\"404 Not Found\")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0b9ad3e2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/Preview/preview.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0b9ad3e2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./preview.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./preview.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./preview.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0b9ad3e2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./preview.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0b9ad3e2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Preview/preview.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}